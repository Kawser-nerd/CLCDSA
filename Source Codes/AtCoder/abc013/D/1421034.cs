using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;

namespace AtCoder
{
	public class Program
	{
		public static void Main(string[] args)
		{
			string[] str = Console.ReadLine().Split(' ');
			var ????? = int.Parse(str[0]); // 1 ~ 10^5
			var ????? = int.Parse(str[1]); // 0 ~ 2*10^5
			var ???????????? = int.Parse(str[2]); // 1 ~ 10^9
			var ????? = ????? == 0 ? new int[0] : Console.ReadLine().Split(' ').Select(s => int.Parse(s) - 1).ToArray();

			var ?????????????????????? = new int[?????];
			for (var ????? = 0; ????? < ?????; ?????++)
			{
				??????????????????????[?????] = ?????;
			}

			for (var ????? = 0; ????? < ?????; ?????++)
			{
				var ????? = ?????[?????];

				var ?????????????? = ??????????????????????[?????];
				??????????????????????[?????] = ??????????????????????[????? + 1];
				??????????????????????[????? + 1] = ??????????????;
			}

			var ??????????? = new int[?????];

			for (var ????? = 0; ????? < ?????; ?????++)
			{
				???????????[??????????????????????[?????]] = ?????;
			}

			var ???????????? = new int[?????];
			var ?????????????? = new int[????? + 1];

			for (var ?????? = 0; ?????? < ?????; ??????++)
			{
				if (????????????[??????] != 0) continue;

				var ????? = ??????;
				????? = ???????????[?????];
				if (????? == ??????)
				{
					????????????[??????] = ????? + 1;
					continue;
				}

				??????????????[0] = ?????;

				for (var ???????? = 1; ???????? < ????????????; ????????++)
				{
					????? = ???????????[?????];
					??????????????[????????] = ?????;
					if (????? != ??????) continue;

					var ???????????????????? = ???????????? % (???????? + 1);

					if (???????????????????? == 0) break;

					????????????[??????] = ??????????????[???????????????????? - 1] + 1;

					for (var ??????????????? = 0; ??????????????? < ????????; ???????????????++)
					{
						var ??????? = ??????????????[???????????????];
						var ???????????????? = (???????????????????? + ???????????????) % (???????? + 1);
						????????????[???????] = ??????????????[????????????????] + 1;
					}

					break;
				}

				if (????????????[??????] == 0)
				{
					????????????[??????] = ????? + 1;
				}
			}
			Console.WriteLine(string.Join(Environment.NewLine, ????????????));
		}
	}
}