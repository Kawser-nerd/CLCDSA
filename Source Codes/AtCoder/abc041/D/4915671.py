N, M = map(int, input().split())
# fast_rabbit[i]:i??????????????? ex)fast_rabbit[i]=11010 ? i????????????1,2,4??????
fast_rabbit = [0]*N
for i in range(M):
    x, y = map(int, input().split())
    fast_rabbit[y-1] += 1 << (x-1)

bit_max = 1 << N
# print(bit_max)
dp = [0] * bit_max
dp[0] = 1  # ?????(????{}?????1)
for bit_set in range(bit_max):
    for rabbit_num in range(N):
        rabbit_bit = 1 << rabbit_num

        # bitset?rabbit_bit???=bitset?????????rabbit_num??????????????
        if bit_set & rabbit_bit:
            others = bit_set - rabbit_bit
            # rabbit_num???????????????????????"rabbit_num?????????bitset"???????????????????????
            if fast_rabbit[rabbit_num] & others == fast_rabbit[rabbit_num]:
                # dp[bitset-rabbitbit]:bitset????????rabbit_num???????????????????
                dp[bit_set] += dp[bit_set - rabbit_bit]
print(dp[bit_max-1])