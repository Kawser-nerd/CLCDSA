from collections import defaultdict


def main():
    """
    N?????????????????
    ????ti
    ??????di
    ???????????????? 
    ?????? N???????? K????????????????
    ?????????????????????????????????

    ??????????????????????????????????????????
    ?????????????????????????????????
    ????????????????????????????? x??????x ? x ????

    ????????????????????????????
    ???????????????????????

    1 ? K  ? N ? 10^5
    1 ? ti ? N
    1 ? di ?10^9

    nCk ????: 10^5 C 10^5/2 => TLE
    DP ?
        1-N??, ?????????????
        ?????????x??????????????
        ?????????????, 10^5 * 10^5 = 10^10
        MAX????????????????
        K ????????????
        ?N?????????????
    """
    N, K = map(int, input().split())
    td = [
        list(map(int, input().split()))
        for _ in range(N)
    ]
    ans = editorial(N, K, td)
    print(ans)


def editorial(N, K, td):
    td = sorted(td, key=lambda x: -x[1])
    c = defaultdict(int)
    d_sum = 0
    # ??????????????????????????
    td_not_first = []
    for t, d in td[:K]:
        if c[t] > 0:
            td_not_first.append(d)
        c[t] += 1
        d_sum += d

    t_sum = len(c)
    ans = d_sum + t_sum ** 2

    for t, d in td[K:]:
        # ???????
        if not td_not_first:
            return ans
        # ???????????????????????
        if c[t] > 0:
            continue

        c[t] += 1
        d_sum += -td_not_first.pop() + d
        t_sum += 1
        ans = max(ans, d_sum + t_sum ** 2)

    return ans
    # ans = editorial_WA_TLE(N, K, td)


if __name__ == '__main__':
    main()