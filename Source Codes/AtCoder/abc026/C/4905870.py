N = int(input())
bl = [(int(input())-1) for _ in range(N-1)]
# ?????N???????????
ll = [0] * (N)
#?????N?????????????????
checked = [0] * (N)
# ????????????
buka = []
for i in range(N):
    t = []
    for j in range(N-1):
        if bl[j] == i :
            t.append(j+1)
    buka.append(t)
#print("buka",buka)
# ll[i][0]????ll[i][1]????????????????1???????0??????
for i in range(N):
    if len(buka[i]) == 0:
        checked[i] = 1
        ll[i] = 1
#print("ll",ll)
while True:
    #print("ll",ll)
    #print("checked",checked)
    # ?????????????
    if min(checked) == 1:
        break
    for i in range(N):
        # ????????
        if checked[i] == 0:
            # ???????????????????
            flg = True
            for bb in buka[i]:
                if checked[bb] == 0:
                    flg = False
            # ?????????????????????
            if flg == True:
                mmax = 0 
                mmin = 10 ** 12
                for bb in buka[i]:
                    mmax = max(mmax,ll[bb])
                    mmin = min(mmin,ll[bb])
                checked[i] = 1
                ll[i] = mmax + mmin + 1
print(ll[0])