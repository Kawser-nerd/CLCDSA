def b_uncle(N, M, Name, Kit):
    from collections import defaultdict

    # ?????????????????????
    name_usechar = defaultdict(int)
    for c in Name:
        name_usechar[c] += 1
    kit_chars = defaultdict(int)
    for c in Kit:
        kit_chars[c] += 1

    ans = 0
    # ???????????????????????????????????????
    for key in name_usechar.keys():
        if kit_chars[key] == 0:
            # ????????????????????????????????
            ans = -1
            break
        ans = max(ans, (name_usechar[key] + kit_chars[key] - 1) // kit_chars[key])
    return ans

N, M = [int(i) for i in input().split()]
Name = input()
Kit = input()
print(b_uncle(N, M, Name, Kit))